<!DOCTYPE html>
< lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HomePage</title>

    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="../static/css/style_homepage.css">
    <link rel="icon" href="../static/css/image/1.ico"/>
    <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css">

    <!-- 引用他人的alert样式 -->
    <link rel="stylesheet" type="text/css" href="../static/css/sweetalert.css">
    <script type="text/javascript" src="../static/js/sweetalert-dev.js"></script>

    <!-- bootstrapValidator 输入验证库 -->
    <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.bootcdn.net/ajax/libs/bootstrap-validator/0.5.3/js/bootstrapValidator.min.js"></script>

    <!-- JS -->
    <script src="../static/js/script_homepage.js"></script>
</head>

<div class="option" id="option">
    <button class="button_source" id="home" onclick="show_home()" style="background-color: lightblue">主页</button>
    <button class="button_source" id="infolist" onclick="show_infolist()">信息列表</button>
    <button class="button_source" id="tasklist" onclick="show_tasklist()">任务列表</button>
    <button class="button_source" id="user" onclick="show_userpage()">用户</button>
</div>
<div class="frame"></div>
<div class="home" id="home_box">
    <h1>欢迎进入联邦学习管理者主页</h1>
    <div class="image"><img src="../static/css/image/4.jpg"></div>
    <br>
    <h2>欢迎管理者&nbsp{{name}}</h2>
    <div class="token" id="token" style="display: none">{{token}}</div>
    <br>
    <button class="button" onclick="alertTips()">参与者奖励</button>
    <button class="button" onclick="alertTips()">已上传模型</button>
    <button class="button" onclick="alertTips()">模型版本</button>
    <button class="button" onclick="show_deploy_task()">部署任务</button>
</div>
<div class="tasklist" id="tasklist_box" style="display: none">
    <div class="task">
        <div class="frame1">请求一</div>
        <div class="line"></div>
        <div class="line" style="top: 200px; display: none"></div>
        <button class="frame2" id="setting" onclick="show_tasklist_window()">设置策略</button>
        <div class="text" style="top: 110px; left: 30px">名称
            <input class="message" id="servicename1" disabled />
        </div>
        <div class="text" style="top: 110px; left: 430px">简介
            <input class="message" id="servicebrief1" disabled />
        </div>
        <div class="text" style="top: 110px; left: 830px">细节
            <input class="message" id="servicedetail1" disabled />
        </div>
        <div class="text" style="top: 200px; left: 30px">奖励
            <input class="message" disabled />
        </div>
        <div class="text" style="top: 200px; left: 430px">开始时间
            <input class="message" disabled />
        </div>
    </div>
    <div class="task" style="top: 370px">
        <div class="frame1">请求二</div>
        <div class="line"></div>
        <div class="line" style="top: 200px; display: none"></div>
        <button class="frame2" onclick="test2()">设置策略</button>
        <div class="text" style="top: 110px; left: 30px">名称
            <input class="message" id="servicename2" disabled />
        </div>
        <div class="text" style="top: 110px; left: 430px">简介
            <input class="message" id="servicebrief2" disabled />
        </div>
        <div class="text" style="top: 110px; left: 830px">细节
            <input class="message" id="servicedetail2" disabled />
        </div>
        <div class="text" style="top: 200px; left: 30px">奖励
            <input class="message" disabled />
        </div>
        <div class="text" style="top: 200px; left: 430px">开始时间
            <input class="message" disabled />
        </div>
    </div>
</div>
<div class="strategy" id="strategy" style="display: none">
    <div class="frame">策略设置</div>
    <br>
    <form class="form-horizontal" role="form">
        <div class="form-group">
            <label for="password" class="col-sm-2 control-label" >聚合策略</label>
            <div class="col-sm-10">
                <select class="group" id="aggregationtiming">
                    <option selected="selected" disabled="disabled"  style='display: none' value=''></option>
                    <option value="synchronize">synchronize</option>
                    <option value="asynchronous">asynchronous</option>
                </select>
            </div>
        </div>
        <div class="form-group">
            <label for="password" class="col-sm-2 control-label" >学习率</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="lr" name="celue5">
            </div>
        </div>
        <div class="form-group">
            <label for="password" class="col-sm-2 control-label" >最大轮数</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="maxround" name="celue1">
            </div>
        </div>
        <div class="form-group">
            <label for="password" class="col-sm-2 control-label" >批大小</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="batchsize" name="celue4">
            </div>
        </div>
        <div class="form-group">
            <label for="password" class="col-sm-2 control-label" >阈值</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="epsilon" name="celue3">
            </div>
        </div>
    </form>
    <button class="btn" style="outline: none" onclick="complete_set()">完成设置</button>
    <button class="btn" style="outline: none; left: 80px" onclick="close_tasklist_window()">取消设置</button>
</div>
<div class="infolist" id="info_box" style="display: none">
    <button class="bt" style="top: 100px; background: lightblue">任务一</button>
    <button class="bt" style="top: 180px">任务二</button>
    <button class="bt" style="top: 260px">任务三</button>
    <div class="detail">
        <div class="frame">全局模型</div>
        <div class="line"></div>
        <div class="image" style="transform: scale(0.7)"><img src="../static/css/image/model.jpg"></div>
        <button class="bt" onclick="show_detail_window()">查看详情</button>
    </div>
    <div class="detail" style="left: 450px">
        <div class="frame">权重摘要</div>
        <div class="line"></div>
        <div class="image" style="transform: scale(0.5); left: 20px; top: 0px"><img src="../static/css/image/weight.jpg"></div>
        <button class="bt" onclick="show_detail_window()">查看详情</button>
    </div>
    <div class="detail" style="left: 850px">
        <div class="frame">训练参与者</div>
        <div class="line"></div>
        <div class="image" style="transform: scale(0.2); left: -170px; top: -270px"><img src="../static/css/image/users.jpg"></div>
        <button class="bt" onclick="show_detail_window()">查看详情</button>
    </div>
</div>
<div class="detail_box" id="detail_box" style="display: none">
    <input class="message" id="message" disabled/>
    <button class="close1" onclick="close_detail_window()">关闭</button>
</div>
<div class="userlist" id="user_box" style="display: none">
    <div class="image" style="transform: scale(0.3)"><img src="../static/css/image/user.jpg"></div>
    <div class="text">管理者&nbsp&nbsp&nbsp{{name}}</div>
    <button class="bt" style="background: lightgray; color: black" onclick="alertTips()">信息修改</button>
    <button class="bt" style="left: 1000px" onclick="logout()">注销</button>
    <div class="line_hor"></div>
    <br><br><br><br><br><br><br><br>
    <form class="form-horizontal formfontset"role="form">
        <div class="form-group form-group-sm" style="transform: scale(1.2); margin-left: 150px; margin-top: 30px">
            <div class="col-sm-1 control-label labelshowset" style="transform: scale(1.5)">任务数</div>
            <div class="col-sm-4">
                <input type="text" class="form-control" style="width: 250px; background: lightgray" disabled/>
            </div>
            <div class="col-sm-1 control-label labelshowset" style="transform: scale(1.5)">管理时间</div>
            <div class="col-sm-4">
                <input type="text" class="form-control" style="width: 250px; background: lightgray" disabled/>
            </div>
        </div>
        <br><br>
        <div class="form-group form-group-sm" style="transform: scale(1.2); margin-left: 150px; margin-top: 30px">
            <div class="col-sm-1 control-label labelshowset" style="transform: scale(1.5)">活跃状态</div>
            <div class="col-sm-4">
                <input type="text" class="form-control" style="width: 250px; background: lightgray" disabled/>
            </div>
            <div class="col-sm-1 control-label labelshowset" style="transform: scale(1.5)">集群规模</div>
            <div class="col-sm-4">
                <input type="text" class="form-control" style="width: 250px; background: lightgray" disabled/>
            </div>
        </div>
        <br><br>
        <div class="form-group form-group-sm" style="transform: scale(1.2); margin-left: 150px; margin-top: 30px">
            <div class="col-sm-1 control-label labelshowset" style="transform: scale(1.5)">相关信息</div>
            <div class="col-sm-4">
                <input type="text" class="form-control" style="width: 250px; background: lightgray" disabled/>
            </div>
            <div class="col-sm-1 control-label labelshowset" style="transform: scale(1.5)">其他</div>
            <div class="col-sm-4">
                <input type="text" class="form-control" style="width: 250px; background: lightgray" disabled/>
            </div>
        </div>
    </form>
</div>
<div class="deploy_task" id="deploy_task" style="display: none">
    <input type="button" class="upload_file" id="upload_file" value="上传配置文件"/>
    <input type="button" class="create_file" id="create_file" value="创建配置文件"/>
    <form action="/" method="post" enctype="multipart/form-data" class="file" style="display: none">
        <div><input type="file" accept=".yaml" class="choose_file" id="choose_file"></div>
        <div><input type="submit" value="上传" class="submit_file" id="submit_file"></div>
    </form>
    <button class="close1" onclick="close_deploy_task()">关闭</button>
</div>
<div class="create_task" id="create_task" style="display: none">
    <div class="frame">请设置以下配置参数</div>
    <br>
    <form class="form-horizontal" id="create_task_form" role="form">
        <div class="form-group">
            <label for="password" class="col-sm-2 control-label" style="font-size: 25px;color: darkred;display:inline-block;" >data:</label>
        </div>
        <div class="form-group">
            <label for="password" class="col-sm-2 control-label" style="display:inline-block;">split_data</label>
            <div class="col-sm-10">
                <select class="group" id="split_data">
                    <option value="True" selected>True</option>
                    <option value="False">False</option>
                </select>
            </div>
        </div>
        <div class="form-group">
            <label for="password" class="col-sm-2 control-label" style="display:inline-block;">client_num</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="client_num" oninput="OnInput (event)" name="client_num" value='1'>
            </div>
        </div>
        <!--<div class="form-group">
            <label for="password" class="col-sm-2 control-label" style="display:inline-block;">client_id</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="client_id" name="" value="['Client1']">
            </div>
        </div>-->
        <div class="form-group">
            <label for="password" class="col-sm-2 control-label" style="display:inline-block;">x_train</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="x_train" name="x_train" value="D:/data/non_iid_data_mnist_range5_label_client3/x_train_1.npy">
            </div>
        </div>
        <div class="form-group">
            <label for="password" class="col-sm-2 control-label" style="display:inline-block;">x_test</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="x_test" name="x_test" value="D:/data/non_iid_data_mnist_range5_label_client3/x_test_1.npy">
            </div>
        </div>
        <div class="form-group">
            <label for="password" class="col-sm-2 control-label" style="display:inline-block;">y_train</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="y_train" name="y_train" value="D://data/non_iid_data_mnist_range5_label_client3/y_train_1.npy">
            </div>
        </div>
        <div class="form-group">
            <label for="password" class="col-sm-2 control-label" style="display:inline-block;">y_test</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="y_test" name="y_test" value="D://data/non_iid_data_mnist_range5_label_client3/y_test_1.npy">
            </div>
        </div>
        <div class="form-group">
            <label for="password" class="col-sm-2 control-label" style="font-size: 25px;color: darkred;display:inline-block;">model:</label>
        </div>
        <div class="form-group">
            <label for="password" class="col-sm-2 control-label" style="display:inline-block;">filepath</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="filepath" name="filepath" value="D:/model/MNIST/">
            </div>
        </div>
        <div class="form-group">
            <label for="password" class="col-sm-2 control-label" style="display:inline-block;">module</label>
            <div class="col-sm-10">
                <select class="group" id="module">
                    <option selected="selected" disabled="disabled" style='display: none' value=''></option>
                    <option value="CNN" selected>CNN</option>
                    <option value="Transformer">Transformer</option>
                    <option value="ResNet">ResNet</option>
                </select>
            </div>
        </div>
        <div class="form-group">
            <label for="password" class="col-sm-2 control-label" >function</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="function" name="function" value="create_cnn_for_mnist">
            </div>
        </div>
        <div class="form-group">
            <label for="password" class="col-sm-2 control-label" >optimizer</label>
            <div class="col-sm-10">
                <select class="group" id="optimizer">
                    <option selected="selected" disabled="disabled" style='display: none' value=''></option>
                    <option value="SGD" selected>SGD</option>
                    <option value="Adam">Adam</option>
                    <option value="Momentum">Momentum</option>
                </select>
            </div>
        </div>
        <div class="form-group">
            <label for="password" class="col-sm-2 control-label" >learning_rate</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="learning_rate" name="learning_rate" value="0.03">
            </div>
        </div>
        <div class="form-group">
            <label for="password" class="col-sm-2 control-label" style="margin-left: -11px">loss</label>
            <div class="col-sm-10" style="margin-left: 12px">
                <select class="group" id="loss">
                    <option selected="selected" disabled="disabled" style='display: none' value=''></option>
                    <option value="CategoricalCrossentropy" selected>CategoricalCrossentropy</option>
                    <option value="MeanSquared">MeanSquared</option>
                    <option value="MeanAbsoluteError">MeanAbsoluteError</option>
                </select>
            </div>
        </div>
        <div class="form-group">
            <label for="password" class="col-sm-2 control-label" >model_type</label>
            <div class="col-sm-10">
                <select class="group" id="model_type">
                    <option selected="selected" disabled="disabled" style='display: none' value=''></option>
                    <option value="tensorflow" selected>tensorflow</option>
                    <option value="pytorch">pytorch</option>
                </select>
            </div>
        </div>
        <div class="form-group">
            <label for="password" class="col-sm-2 control-label" style="font-size: 25px;color: darkred">device:</label>
        </div>
        <div class="form-group">
            <label for="password" class="col-sm-2 control-label" style="font-size: 17px;color: darkred">device_server:</label>
        </div>
        <div class="form-group">
            <label for="password" class="col-sm-2 control-label" style="margin-left: -11px">type</label>
            <div class="col-sm-10" style="margin-left: 12px">
                <select class="group" id="type" name="type">
                    <option value="server" selected>server</option>
                    <option value="client">client</option>
                </select>
            </div>
        </div>
        <div class="form-group">
            <label for="password" class="col-sm-2 control-label" >server_id</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="server_id" name="server_id" value="server1">
            </div>
        </div>
        <div class="form-group">
            <label for="password" class="col-sm-2 control-label" >execution_form</label>
            <div class="col-sm-10">
                <select class="group" id="execution_form">
                    <option value="StandAlone">StandAlone</option>
                    <option value="MutiDevice" selected>MutiDevice</option>
                </select>
            </div>
        </div>
        <div class="form-group">
            <label for="password" class="col-sm-2 control-label" >aggregation_type</label>
            <div class="col-sm-10">
                <select class="group" id="aggregation_type">
                    <option value="synchronous">synchronous</option>
                    <option value="Asynchronous" selected>Asynchronous</option>
                </select>
            </div>
        </div>
        <div class="form-group">
            <label for="password" class="col-sm-2 control-label" >aggregation_func</label>
            <div class="col-sm-10">
                <select class="group" id="aggregation_func">
                    <option value="FedAVG">FedAVG</option>
                    <option value="FedCD" selected>FedCD</option>
                    <option value="FedAsync" selected>FedAsync</option>
                </select>
            </div>
        </div>
        <div class="form-group">
            <label for="password" class="col-sm-2 control-label" >maxround</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="maxround" name="maxround" value="2000">
            </div>
        </div>
        <div class="form-group">
            <label for="password" class="col-sm-2 control-label" >sim_cc</label>
            <div class="col-sm-10">
                <select class="group" id="sim_cc">
                    <option value="True">True</option>
                    <option value="False" selected>False</option>
                </select>
            </div>
        </div>
        <div class="form-group">
            <label for="password" class="col-sm-2 control-label" >sim_zip_path</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="sim_zip_path" name="sim_zip_path" value="D:/model/">
            </div>
        </div>
        <div class="form-group">
            <label for="password" class="col-sm-2 control-label" >target_acc</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="target_acc" name="target_acc" value="0.95">
            </div>
        </div>
        <div class="form-group" id="client_group" name="client_group">
            <label for="password" class="device_client" id="device_client" name="device_client" style="font-size: 17px;color: darkred;margin-left: 15px">device_client_1:</label>
        </div>
        <div class="form-group" id="type_group" name="type_group">
            <label for="password" class="col-sm-2 control-label" style="margin-left: -11px">type</label>
            <div class="col-sm-10" style="margin-left: 12px">
                <select class="group" id="type" name="type">
                    <option value="server">server</option>
                    <option value="client" selected>client</option>
                </select>
            </div>
        </div>
        <div class="form-group" id="client_id_group" name="client_id_group">
            <label for="password" class="col-sm-2 control-label">client_id</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="client_id" name="client_id" value="client1">
            </div>
        </div>
        <div class="form-group" id="w_file_initial_group" name="w_file_initial_group">
            <label for="password" class="col-sm-2 control-label" >w_file_initial</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="w_file_initial" name="w_file_initial" value="D:/model/MNIST/w0.h5">
            </div>
        </div>
        <div class="form-group" id="batch_size_group" name="batch_size_group">
            <label for="password" class="col-sm-2 control-label" >batch_size</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="batch_size" name="batch_size" value="128">
            </div>
        </div>
        <div class="form-group" id="train_epoch_group" name="train_epoch_group">
            <label for="password" class="col-sm-2 control-label" >train_epoch</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="train_epoch" name="train_epoch" value="5">
            </div>
        </div>
    </form>
    <button class="close1" onclick="close_create_task()">取消</button>
    <button class="finish" onclick="complete_create_task()">完成配置</button>
</div>
</body>
</html>